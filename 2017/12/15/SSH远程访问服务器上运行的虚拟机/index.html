<!DOCTYPE html><html lang="chinese"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>SSH远程连接虚拟机(Ubuntu) | AugustJo's bloc</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">SSH远程连接虚拟机(Ubuntu)</h1><a id="logo" href="/.">AugustJo's bloc</a><p class="description">welcome to my bloc</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Start</i></a><a href="/archives/"><i class="fa fa-archive"> Archiv</i></a><a href="/about/"><i class="fa fa-user"> Über</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">SSH远程连接虚拟机(Ubuntu)</h1><div class="post-meta">Dec 15, 2017</div><div class="post-content"><h2 id="实验平台："><a href="#实验平台：" class="headerlink" title="实验平台："></a>实验平台：</h2><p>实验室服务器(Windows Server 2008)，安装虚拟机VMware(Ubuntu 14.04)。<br>个人PC(Win10)。客户端软件：MobeXterm(或者Putty)，这两个软件都是免安装解压缩后直接使用的，MobaXterm使用Personal个人版是免费的。</p>
<h2 id="配置步骤："><a href="#配置步骤：" class="headerlink" title="配置步骤："></a>配置步骤：</h2><p>参考<a href="http://www.linuxidc.com/Linux/2014-04/99728.htm" target="_blank" rel="noopener">SSH连接虚拟机中的Ubuntu 12.0.4</a></p>
<h3 id="1-在虚拟机-Ubuntu-上安装ssh的服务器端"><a href="#1-在虚拟机-Ubuntu-上安装ssh的服务器端" class="headerlink" title="1.在虚拟机(Ubuntu)上安装ssh的服务器端"></a>1.在虚拟机(Ubuntu)上安装ssh的服务器端</h3><h4 id="a-查看是否安装ssh服务"><a href="#a-查看是否安装ssh服务" class="headerlink" title="(a)查看是否安装ssh服务:"></a>(a)查看是否安装ssh服务:<br></h4><p>在ubuntu终端命令界面键入：<br><br> <code>ssh localhost</code> <br></p>
<p>如果出现下面提示则表示还没有安装：<br> <code>ssh: connect to hostlocalhost port 22: Connection refused</code></p>
<h4 id="b-安装ssh服务"><a href="#b-安装ssh服务" class="headerlink" title="(b)安装ssh服务:"></a>(b)安装ssh服务:<br></h4><p>如果通过上面步骤查看没有安装<code>sshserver</code>、则键入如下命令安装：<br> <code>sudo apt-getinstall –y openssh-server</code></p>
<h4 id="c-安装完成后启动ssh"><a href="#c-安装完成后启动ssh" class="headerlink" title="(c)安装完成后启动ssh:"></a>(c)安装完成后启动ssh:<br></h4><p> <code>sudo service ssh start</code></p>
<h4 id="d-启动完成之后可以使用命令：ps-–e-grep-ssh-来查看ssh状态"><a href="#d-启动完成之后可以使用命令：ps-–e-grep-ssh-来查看ssh状态" class="headerlink" title="(d)启动完成之后可以使用命令：ps –e | grep ssh 来查看ssh状态"></a>(d)启动完成之后可以使用命令：<code>ps –e | grep ssh</code> 来查看ssh状态</h4><p> <code>4057 ?        00:00:00 sshd</code></p>
<p>表明启动成功。如果只有ssh-agent那ssh-server还没有启动，需要<code>sudo /etc/init.d/ssh start</code>，如果看到<code>sshd</code>那说明<code>ssh-server</code>已经启动了。</p>
<h4 id="e-使用嵌入式自带编辑器gedit修改配置文件-etc-ssh-sshd-config"><a href="#e-使用嵌入式自带编辑器gedit修改配置文件-etc-ssh-sshd-config" class="headerlink" title="(e)使用嵌入式自带编辑器gedit修改配置文件/etc/ssh/sshd_config"></a>(e)使用嵌入式自带编辑器<code>gedit</code>修改配置文件<code>/etc/ssh/sshd_config</code></h4><p><code>sudo gedit /etc/ssh/sshd_config</code></p>
<p>编辑完如下图，编辑完后保存，关闭编辑器。(修改此行目的是从远程界面登录的时候可以进入root模式)<br><img src="https://i.imgur.com/4u4jHlV.png" alt=""></p>
<h4 id="f-查看Ubuntu的IP地址：-eth0的inet"><a href="#f-查看Ubuntu的IP地址：-eth0的inet" class="headerlink" title="(f)查看Ubuntu的IP地址：(eth0的inet)"></a>(f)查看Ubuntu的IP地址：(eth0的inet)</h4><p> <code>sudo ifconfig</code></p>
<p><img src="https://i.imgur.com/58GH6lW.png" alt=""></p>
<h3 id="2-设置虚拟机网络适配器-此步仅用于虚拟机，如果服务器上运行的是ubuntu系统自行忽略-参考VMware-NAT做端口映射"><a href="#2-设置虚拟机网络适配器-此步仅用于虚拟机，如果服务器上运行的是ubuntu系统自行忽略-参考VMware-NAT做端口映射" class="headerlink" title="2.设置虚拟机网络适配器(此步仅用于虚拟机，如果服务器上运行的是ubuntu系统自行忽略)参考VMware NAT做端口映射"></a>2.设置虚拟机网络适配器(此步仅用于虚拟机，如果服务器上运行的是ubuntu系统自行忽略)参考<a href="https://jingyan.baidu.com/article/c35dbcb0d1ff248916fcbc0d.html" target="_blank" rel="noopener">VMware NAT做端口映射</a></h3><h4 id="a-VMware【编辑】菜单下选择【虚拟网络编辑器】如图"><a href="#a-VMware【编辑】菜单下选择【虚拟网络编辑器】如图" class="headerlink" title="(a)VMware【编辑】菜单下选择【虚拟网络编辑器】如图"></a>(a)VMware【编辑】菜单下选择【虚拟网络编辑器】如图</h4><p><img src="https://i.imgur.com/XDrpI1t.png" alt=""></p>
<h4 id="b-选择NAT，然后点击NAT设置，如图"><a href="#b-选择NAT，然后点击NAT设置，如图" class="headerlink" title="(b)选择NAT，然后点击NAT设置，如图"></a>(b)选择<code>NAT</code>，然后点击<code>NAT设置</code>，如图</h4><p><img src="https://i.imgur.com/StgtJMk.png" alt=""></p>
<h4 id="c-添加端口转发：-虚拟机的网络是通过NAT与主机共享，要想通过外网访问虚拟机需要使用宿主机端口，这时选择的端口号要是宿主机未被占用的端口"><a href="#c-添加端口转发：-虚拟机的网络是通过NAT与主机共享，要想通过外网访问虚拟机需要使用宿主机端口，这时选择的端口号要是宿主机未被占用的端口" class="headerlink" title="(c)添加端口转发：(虚拟机的网络是通过NAT与主机共享，要想通过外网访问虚拟机需要使用宿主机端口，这时选择的端口号要是宿主机未被占用的端口)"></a>(c)添加端口转发：(虚拟机的网络是通过NAT与主机共享，要想通过外网访问虚拟机需要使用宿主机端口，这时选择的端口号要是宿主机未被占用的端口)</h4><p><img src="https://i.imgur.com/Q3sLJCH.png" alt=""></p>
<h4 id="d-在Windows防火墙开放此端口：win7系统如何在防火墙里开放端口"><a href="#d-在Windows防火墙开放此端口：win7系统如何在防火墙里开放端口" class="headerlink" title="(d)在Windows防火墙开放此端口：win7系统如何在防火墙里开放端口"></a>(d)在Windows防火墙开放此端口：<a href="https://jingyan.baidu.com/article/f96699bbadafca894f3c1b7a.html" target="_blank" rel="noopener">win7系统如何在防火墙里开放端口</a></h4><h3 id="3-ping网络"><a href="#3-ping网络" class="headerlink" title="3.ping网络"></a>3.ping网络</h3><h4 id="a-远端电脑，cmd打开命令窗口，键入：ipconfig-命令、查看主机IP。（实验室这台服务器不在实验室局域网内"><a href="#a-远端电脑，cmd打开命令窗口，键入：ipconfig-命令、查看主机IP。（实验室这台服务器不在实验室局域网内" class="headerlink" title="(a)远端电脑，cmd打开命令窗口，键入：ipconfig 命令、查看主机IP。（实验室这台服务器不在实验室局域网内)"></a>(a)远端电脑，<code>cmd</code>打开命令窗口，键入：<code>ipconfig</code> 命令、查看主机IP。（实验室这台服务器不在实验室局域网内)</h4><p><img src="https://i.imgur.com/9NVHEXa.png" alt=""></p>
<h4 id="b-服务器IP-外网和局域网-："><a href="#b-服务器IP-外网和局域网-：" class="headerlink" title="(b)服务器IP(外网和局域网)："></a>(b)服务器IP(外网和局域网)：</h4><p><img src="https://i.imgur.com/TxzF3em.png" alt=""></p>
<h4 id="c-通过远端电脑ping服务器的外网IP："><a href="#c-通过远端电脑ping服务器的外网IP：" class="headerlink" title="(c)通过远端电脑ping服务器的外网IP："></a>(c)通过远端电脑ping服务器的外网IP：</h4><p><img src="https://i.imgur.com/CeuijzC.png" alt=""></p>
<h4 id="d-服务器（Windows）ping虚拟机（Ubuntu）"><a href="#d-服务器（Windows）ping虚拟机（Ubuntu）" class="headerlink" title="(d)服务器（Windows）ping虚拟机（Ubuntu）"></a>(d)服务器（Windows）ping虚拟机（Ubuntu）</h4><p><img src="https://i.imgur.com/q8gWklX.png" alt=""></p>
<h3 id="4-MobaXterm连接远程linux"><a href="#4-MobaXterm连接远程linux" class="headerlink" title="4.MobaXterm连接远程linux:"></a>4.MobaXterm连接远程linux:</h3><p><a href="http://www.bubuko.com/infodetail-381983.html" target="_blank" rel="noopener">查看教程1</a><br><br><a href="http://blog.chinaunix.net/uid-31404814-id-5757246.html" target="_blank" rel="noopener">查看教程2</a></p>
<h4 id="a-打开MobaXterm-Personal-9-4-exe选择Session创建一个和我的ubuntu服务器连接的终端"><a href="#a-打开MobaXterm-Personal-9-4-exe选择Session创建一个和我的ubuntu服务器连接的终端" class="headerlink" title="(a)打开MobaXterm_Personal_9.4.exe选择Session创建一个和我的ubuntu服务器连接的终端."></a>(a)打开MobaXterm_Personal_9.4.exe选择Session创建一个和我的ubuntu服务器连接的终端.</h4><p><img src="https://i.imgur.com/ARtbySM.png" alt=""></p>
<h4 id="b-选择协议为SSH，下面输入IP（这里我输入的是服务器外网IP，如果是Linux的服务器需要写的就是Linux的外网IP，待会儿告诉你怎么查。。），用户名称（随便写），端口号（对应的虚拟机的端口号）。再下面选项是配置显示界面的状态可根据自己的需要做相应调整。"><a href="#b-选择协议为SSH，下面输入IP（这里我输入的是服务器外网IP，如果是Linux的服务器需要写的就是Linux的外网IP，待会儿告诉你怎么查。。），用户名称（随便写），端口号（对应的虚拟机的端口号）。再下面选项是配置显示界面的状态可根据自己的需要做相应调整。" class="headerlink" title="(b)选择协议为SSH，下面输入IP（这里我输入的是服务器外网IP，如果是Linux的服务器需要写的就是Linux的外网IP，待会儿告诉你怎么查。。），用户名称（随便写），端口号（对应的虚拟机的端口号）。再下面选项是配置显示界面的状态可根据自己的需要做相应调整。"></a>(b)选择协议为SSH，下面输入IP（这里我输入的是服务器外网IP，如果是Linux的服务器需要写的就是Linux的外网IP，待会儿告诉你怎么查。。），用户名称（随便写），端口号（对应的虚拟机的端口号）。再下面选项是配置显示界面的状态可根据自己的需要做相应调整。</h4><p><img src="https://i.imgur.com/8ALjNr4.png" alt=""></p>
<h4 id="c-配置完成，选择ok，下图红框中就是新建的一个终端双击启动。输入密码登陆。MobaXterm比Putty更加方便，可以直接读取linux的文件系统并且可以实现本地文件拖拽上传。"><a href="#c-配置完成，选择ok，下图红框中就是新建的一个终端双击启动。输入密码登陆。MobaXterm比Putty更加方便，可以直接读取linux的文件系统并且可以实现本地文件拖拽上传。" class="headerlink" title="(c)配置完成，选择ok，下图红框中就是新建的一个终端双击启动。输入密码登陆。MobaXterm比Putty更加方便，可以直接读取linux的文件系统并且可以实现本地文件拖拽上传。"></a>(c)配置完成，选择ok，下图红框中就是新建的一个终端双击启动。输入密码登陆。MobaXterm比Putty更加方便，可以直接读取linux的文件系统并且可以实现本地文件拖拽上传。</h4><p><img src="https://i.imgur.com/yqYi1zR.png" alt=""><br><img src="https://i.imgur.com/9Ov4xWp.png" alt=""><br><img src="https://i.imgur.com/hIpU8pn.png" alt=""><br><br><br><br><br><strong>注：查看虚拟机的外网IP<br><br>     安装使用curl命令实现：<code>sudo apt-get install curl</code><br><br>    输入命令：<code>curl ifconfig.me</code></strong></p>
<p><img src="https://i.imgur.com/NXisUBa.png" alt=""></p>
</div><div class="tags"></div><div class="post-nav"><a href="/2018/01/06/在github搭建个人网站/" class="pre"></a><a href="/2017/12/06/MarkdownPad2/" class="next">Welcome to MarkdownPad 2</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Kategorien</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Letzte</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/01/06/在github搭建个人网站/">在github搭建个人网站</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/15/SSH远程访问服务器上运行的虚拟机/">SSH远程连接虚拟机(Ubuntu)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/06/MarkdownPad2/">Welcome to MarkdownPad 2</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/05/hello-world/">Hello World</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Blogroll</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">AugustJo's bloc.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>